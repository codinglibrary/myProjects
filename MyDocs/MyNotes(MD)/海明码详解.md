[toc]

### 海明码怎么来检错纠错的？    


&emsp;&emsp;要想使传送的一串数据具有检错纠错能力，可以想到的一个方法就是在一串数据中加上一些状态位来进行检查。这样在数据传输过程中如果发生了错误，可以及时发现甚至纠正错误。不过要加多少状态位？状态位加在哪里？状态位的值应该是多少呢？加上状态位又该怎样检错并纠错呢？    

##### 首先，应该加多少状态位？
---
&emsp;&emsp;设在 $n$ 个长度的数据串上加上了 $r$ 个状态位，这样数据串的长度变成了 $n+r$ 。于是需要 $r$ 个状态位来表示这 $n+r$ 位的状态，即 $n+r$ 个状态。另外还有一个状态——数据正确与否的状态，所以一共有 $n+r+1$ 个状态。 $r$ 个状态位能够表示 $2^r$ 个状态，所以有
$$2^r\geq n+r+1$$    

##### 其次，状态位加在哪里？
---
&emsp;&emsp;直接给出答案：第 $i$ 个校验码的位置，在整个 $n+r$ 的长度上的位置是
$$2^{i-1}$$    

##### 然后，状态位的值是多少？
---
&emsp;&emsp;为了方便描述，将 $n$ 位数据记作 $D_1,D_2,\cdots,D_j,\cdots,D_n$ ；将 $r$ 位状态位记作 $P_1,P_2,\cdots,P_i,\cdots,P_r$；将加上状态码后的$n+r$位序列记作$M_1,M_2,\cdots,M_k,\cdots,M_{n+r}$。    
&emsp;&emsp;若$M_k$出错，即第 $k$ 个位置出错。先换算一下，因为是用二进制的r个状态位来表示的$n+r$个状态，所以将 $k$ 换算为$\lceil{log_2(n+1)}\rceil$位的二进制数，记作 $e_{\lceil{log_2((n+r)+1)}\rceil},\cdots,e_2,e_1$ 。    
&emsp;&emsp;假如 $M_1$ 出错，即第 $1$ 位发生错误，也即第 $0...01$ 位数据出错,此时 $e_1=1$ ，其他为 $0$ ；假如 $M_3$ 出错，即第 $3$ 位发生错误，也即第 $0...011$ 位数据出错,此时 $e_1,e_2=1$ ，其他为 $0$  ；其他同理。所以 $e_1$ 与 $M_1,M_3,M_5,\cdots$ 有关； $e_2$ 与 $M_2,M_3,M_6,\cdots$  有关；其他同理。将这种关系用异或来表示，可得式子1   
$$e_1=M_1 \oplus M_3\oplus M_5\oplus M_7\cdots $$ 
$$e_2=M_2\oplus M_3\oplus M_6\oplus M_7\cdots$$ 
$$e_3=M_4\oplus M_5\oplus M_6\oplus M_7\cdots$$ 
$$\cdots$$
&emsp;&emsp;接着开始计算 $P_i$ 。无错的时候 $e_{\lceil{log_2((n+r)+1)}\rceil},\cdots,e_2,e_1$ 全都为0，所以令上式等号右边的式子等于零。求得式子2
$$M_1(P_1)= M_3(D_1)\oplus M_5(D_2)\oplus M_7(D_4)\cdots$$
$$M_2(P_2)= M_3(D_1)\oplus M_6(D_3)\oplus M_7(D_4)\cdots$$
$$M_4(P_3)= M_5(D_2)\oplus M_6(D_3)\oplus M_7(D_4)\cdots$$
$$\cdots$$
&emsp;&emsp;根据式子2我们就能求出每一个状态位的值。    

##### 最后，如何检错纠错？
---
&emsp;&emsp;假如某一位在数据传输过程中发生了错误，比如 $M_3$ ，我们可以通过计算式子1找到出错的位置，然后将出错的位置取反即可。    
&emsp;&emsp;这种编码方案实现了这种检错纠错的功能，根据这个方案编码得到的序列就叫海明码。特别指出，海明码如果要能够检测 $d$ 位错误，需要一个海明距位 $d+1$ 的编码方案；海明码如果要能够纠正$d$位错误，需要一个海明距位$2d+1$的编码方案，更详细的原理分析，在此不做展开。
