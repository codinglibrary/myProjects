[TOC]

### 什么是微服务

一种架构模式。 服务与服务间采用轻量级的通信机制互相沟通（通常是基于HTTP协议的RESTful API）。

### 特点

与SOA相比：

- 小，且专注于做一件事情

- 轻量级的通信机制

​	Dubbo是SOA的开源的标准实现之一，类似的还有像gRPC、Thrift等。微服务更倾向于使用Restful风格的API，轻量级的协议可以很好得支持跨语言开发的服务，可能有的微服务用Java实现，有的用Go语言，有的用C++，但所有的语言都可以支持Http协议通信，所有的开发人员都能理解Restful风格API的含义。

- 松耦合，独立部署

每个微服务内部都可以使用DDD(领域驱动设计)的思想进行设计领域模型，服务间尽量减少同步的调用，多使用消息的方式让服务间的领域事件来进行解耦。

- 高度自治和持续集成

从底层的角度来说，SOA更加倾向于基于虚拟机或者服务器的部署，每个应用都部署在不同的机器上，一般持续集成工具更多是由运维团队写一些shell脚本以及提供基于共同协议（比如dubbo管理页面）的开发部署页面。微服务可以很好得和容器技术结合，容器技术比微服务出现得晚，但是容器技术的出现让微服务的实施更加简便。目前Docker已经成为很多微服务实践的基础容器。因为容器的特色，所以一台机器上可以部署几十个几百个不同的微服务。如果某个微服务流量压力比其他微服务大，可以在不增加机器的情况，在一台机器上多分配一些该微服务的容器实例。同时，因为Docker的容器编排社区日渐成熟，类似Mesos，Kubernetes以及Docker官方提供的swarm都可以作为持续集成部署的技术选择。

### 特征

- 通过服务实现组件化

- 按业务能力来划分服务和开发团队

- **去中心化**

- 基础设施自动化

### 微服务架构要解决哪些问题

1、服务注册、发现：服务提供方要注册通告服务地址，服务的调节方要能发现目标服务

>  注册中心：实现秒级服务注册和发现

2、Consul

3、负载均衡

4、集中式负载均衡

5、服务网关

6、服务容错：

​		服务之间相互依赖；

​		单服务异常导致雪崩；

​		一些最佳实践：电路熔断器模式、舱壁隔离模式（Bulkhead Isolation Pattern）、限流（Rate Limiting/Loaad Shedder）、回退（fallback）

### 服务框架

#### Dubbo

是一款分布式服务框架，高性能和透明化的RPC远程服务调用方案，SOA服务治理方案。有以下几个角色：

- Provider：暴露服务方成为“服务提供者”

- Consumer

- Registry

- Monitor：统计服务的调用次数和调用时间的日志服务

#### Spring Cloud

是一系列框架的有序集合：

- Spring Cloud Netflix

- Spring Cloud Config

- Spring Cloud Bus

- Spring Cloud Security：对Spring Security的封装，并能配合Netflix使用

- Spring Cloud Zookeeper

- Spring Boot：Spring Boot微服务可以轻松地创建独立的产品级应用程序

#### 服务框架-封装公共关注点

- 服务注册、发现、负载均衡和健康检查

- 监控日志

- REST/RPC和序列化

- 配置

- 限流和容错

- 管理接口

- 统一错误处理

- 安全

- 文档自动生成

#### 高效服务调用（内容缺失）

#### 任务调度（内容缺失）

#### 微服务架构下的配置下发（内容缺失）

#### 微服务架构下的分布式事务（内容缺失）